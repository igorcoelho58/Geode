{{- /* Schema.org Structured Data for Product Reviews */ -}}
{{- if and (.IsPage) (or (eq .Section "vendas") (eq .Section "atendimento") (eq .Section "marketing") (eq .Section "produtividade")) -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "{{ .Title }}",
  "description": "{{ with .Description }}{{ . }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}",
  {{- with .Params.cover.image }}
  "image": "{{ . | absURL }}",
  {{- end }}
  "brand": {
    "@type": "Brand",
    "name": "{{ .Title }}"
  },
  "review": {
    "@type": "Review",
    "reviewBody": "{{ .Summary | plainify | truncate 300 }}",
    "author": {
      "@type": "Organization",
      "name": "Geode"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Geode",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ "/img/logo.svg" | absURL }}"
      }
    },
    "datePublished": "{{ .Date.Format "2006-01-02" }}"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.5",
    "reviewCount": "1",
    "bestRating": "5",
    "worstRating": "1"
  }
}
</script>
{{- end -}}

{{- /* Newsletter Script */ -}}
<script src="{{ "js/newsletter.js" | relURL }}" defer></script>

{{- /* Organization Schema for Homepage */ -}}
{{- if .IsHome -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Geode",
  "url": "{{ .Permalink }}",
  "logo": "{{ "/img/logo.svg" | absURL }}",
  "description": "{{ site.Params.description | default "An√°lises profissionais de software B2B para empreendedores brasileiros." }}",
  "sameAs": [
    "https://linkedin.com/company/geode-ai",
    "https://instagram.com/geode.ai"
  ],
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "Customer Service",
    "email": "contato@geode.ai"
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ site.Title }}",
  "url": "{{ .Permalink }}",
  "description": "{{ site.Params.description }}",
  "publisher": {
    "@type": "Organization",
    "name": "Geode"
  }
}
</script>
{{- end -}}

{{- /* Article Schema for Category Pages */ -}}
{{- if and (.IsPage) (ne .Section "vendas") (ne .Section "atendimento") (ne .Section "marketing") (ne .Section "produtividade") -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ .Title }}",
  "description": "{{ with .Description }}{{ . }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}",
  {{- with .Params.cover.image }}
  "image": "{{ . | absURL }}",
  {{- end }}
  "author": {
    "@type": "Organization",
    "name": "Geode"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Geode",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ "/img/logo.svg" | absURL }}"
    }
  },
  "datePublished": "{{ .Date.Format "2006-01-02" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02" }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  }
}
</script>
{{- end -}}

{{- /* BreadcrumbList Schema */ -}}
{{- if not .IsHome -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ .Site.BaseURL }}"
    }
    {{- if .Section }},
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{ .Section | humanize }}",
      "item": "{{ .Site.BaseURL }}{{ .Section }}/"
    }
    {{- end }}
    {{- if .IsPage }},
    {
      "@type": "ListItem",
      "position": {{ if .Section }}3{{ else }}2{{ end }},
      "name": "{{ .Title }}",
      "item": "{{ .Permalink }}"
    }
    {{- end }}
  ]
}
</script>
{{- end -}}
